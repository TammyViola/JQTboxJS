/****
*
* JQTbox.js
* white by Tammy  2018.08.16
* version 1.1
* 
****/(function(c){var e=function(a,b){this.$obj=c(a);this.dataBox=this.$obj.attr("data-tbox");this.options=c.extend({},c.fn.JQTbox._defaults,b);this._tapEvent="ontouchstart"in document?"touchstart":"click";this._init()};e.prototype={constructor:e,_init:function(){var a=this;this.options=c.extend(!0,this.options,{state:this.state,trigger:this.trigger,imgUrl:this.imgUrl,closeTime:this.closeTime,isShowHd:this.isShowHd,headTitle:this.headTitle,isShowConfirm:this.isShowConfirm,btnConfirmTxt:this.btnConfirmTxt,isShowCancel:this.isShowCancel,btnCancelTxt:this.btnCancelTxt,boxTitle:this.boxTitle,boxDoc:this.boxDoc,onInitFun:this.onInitFun,onConfirmFun:this.onConfirmFun,onCancelFun:this.onCancelFun});if("click"==this.options.trigger)if(/msie [6|7|8]/i.test(navigator.userAgent))this.$obj.click(function(){1>c("#jQTbox_"+a.dataBox+"_"+a.options.state).length&&a._addHtm();a._showBox();if(a.options.onInitFun)a.options.onInitFun()});else this.$obj.on(a._tapEvent,function(){1>c("#jQTbox_"+a.dataBox+"_"+a.options.state).length&&a._addHtm();a._showBox();if(a.options.onInitFun)a.options.onInitFun()});else if("directOpen"==this.options.trigger&&(1>c("#jQTbox_"+a.dataBox+"_"+a.options.state).length&&a._addHtm(),a.options.onInitFun))a.options.onInitFun()},_addHtm:function(){var a=this.options.state,b=this._tipState(),d=this.options.boxTitle,e=this.options.boxDoc,g=this._stateImgs();this._boxConfirmFun();this._boxCancelFun();b=""+('\x3cdiv class\x3d"jqTbox-group '+b+'" id\x3d"jQTbox_'+this.dataBox+"_"+a+'" style\x3d"display:none"\x3e');b=b+'\x3cdiv class\x3d"jqTbox-zhe"\x3e\x3c/div\x3e\x3cdiv class\x3d"jqTbox-box"\x3e'+('\x3ca href\x3d"javascript: void(0)" class\x3d"jqTbox-close" id\x3d"jQTboxClose_'+this.dataBox+"_"+a+'"\x3e\x3c/a\x3e');b+='\x3cdiv class\x3d"jqTbox-inner"\x3e';this.options.isShowHd&&(b+='\x3cdiv class\x3d"jqTbox-hd"\x3e\x3ch4 class\x3d"tit"\x3e'+this.options.headTitle+"\x3c/h4\x3e\x3c/div\x3e");b+='\x3cdiv class\x3d"jqTbox-bd"\x3e';"normal"!=a&&(b+='\x3cimg src\x3d"'+g+'" class\x3d"icon"/\x3e');d&&(b+='\x3cdiv class\x3d"tit"\x3e'+d+"\x3c/div\x3e");e&&(b+='\x3cdiv class\x3d"doc"\x3e'+e+"\x3c/div\x3e");b+="\x3c/div\x3e";if(this.options.isShowCancel||this.options.isShowConfirm)b+='\x3cdiv class\x3d"jqTbox-ft"\x3e',this.options.isShowConfirm&&(b+='\x3ca href\x3d"javascript: void(0)" class\x3d"btn btn-confirm" id\x3d"jQTboxConfirm_'+this.dataBox+"_"+a+'"\x3e'+(this.options.btnConfirmTxt?this.options.btnConfirmTxt:"\u786e\u8ba4")+"\x3c/a\x3e"),this.options.isShowCancel&&(b+='\x3ca href\x3d"javascript: void(0)" class\x3d"btn btn-cancel" id\x3d"jQTboxCancel_'+this.dataBox+"_"+a+'"\x3e'+(this.options.btnCancelTxt?this.options.btnCancelTxt:"\u53d6\u6d88")+"\x3c/a\x3e"),b+="\x3c/div\x3e";b+="\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e";c("body").append(b);this._boxConfirmFun("#jQTboxConfirm_"+this.dataBox+"_"+a);this._boxCancelFun("#jQTboxCancel_"+this.dataBox+"_"+a+", #jQTboxClose_"+this.dataBox+"_"+a);return b},_tipState:function(){var a;switch(this.options.state){case "error":a="has-error";break;case "success":a="has-success";break;case "warning":a="has-warning";break;case "ask":a="has-ask";break;default:a="has-normal"}return a},_stateImgs:function(){var a=this.options.imgUrl,b="";switch(this.options.state){case "error":b=a+"tbox_error.png";break;case "success":b=a+"tbox_success.png";break;case "warning":b=a+"tbox_warn.png";break;case "ask":b=a+"tbox_ask.png"}return b},_showBox:function(){var a=this,b=c("#jQTbox_"+this.dataBox+"_"+this.options.state);b.find(".jqTbox-box");var d=this.options.closeTime;b.stop(!0,!0).fadeIn(300,function(){c(this).addClass("has-open");0!=d&&setTimeout(function(){a._hideBox()},d)})},_hideBox:function(){var a=c("#jQTbox_"+this.dataBox+"_"+this.options.state);a.find(".jqTbox-box");a.removeClass("has-open").delay(150).fadeOut(150)},_boxConfirmFun:function(a){var b=this;if(/msie [6|7|8]/i.test(navigator.userAgent))c(a).click(function(){if(b.options.onConfirmFun)b.options.onConfirmFun();else b._hideBox()});else c(a).on(this._tapEvent,function(){if(b.options.onConfirmFun)b.options.onConfirmFun();else b._hideBox()})},_boxCancelFun:function(a){var b=this;if(/msie [6|7|8]/i.test(navigator.userAgent))c(a).click(function(){if(b.options.onCancelFun)b.options.onCancelFun();else b._hideBox()});else c(a).on(this._tapEvent,function(){if(b.options.onCancelFun)b.options.onCancelFun();else b._hideBox()})}};c.fn.JQTbox=function(a){return this.each(function(){var b=c(this),d=b.data("JQTbox"),f="object"===typeof a&&a;d||(d=new e(this,f),b.data("JQTbox",d))})};c.fn.JQTbox._defaults={state:"normal",trigger:"click",imgUrl:"images/",closeTime:0,isShowHd:!1,headTitle:"\u6e29\u99a8\u63d0\u793a",isShowConfirm:!0,btnConfirmTxt:"\u786e\u8ba4",isShowCancel:!1,btnCancelTxt:"\u53d6\u6d88",boxTitle:null,boxDoc:null,onInitFun:null,onConfirmFun:null,onCancelFun:null};c.fn.JQTbox.Constructor=e})(window.jQuery);